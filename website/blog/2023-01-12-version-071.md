---
ia-translated: true
title: 'React Native 0.71: TypeScript por Padrão, Flexbox Gap e muito mais...'
authors: [mattcarrollcode, NickGerleman, cortinico, kelset]
tags: [announcement, release]
date: 2023-01-12
---

Hoje estamos lançando a versão 0.71 do React Native! Esta é uma versão repleta de recursos, incluindo:

- [TypeScript por padrão](/blog/2023/01/12/version-071#typescript-by-default)
- [Simplificando layouts com Flexbox Gap](/blog/2023/01/12/version-071#simplifying-layouts-with-flexbox-gap)
- [Props inspirados na web para acessibilidade, estilos e eventos](/blog/2023/01/12/version-071#web-inspired-props-for-accessibility-styles-and-events)
- [Restaurando PropTypes](/blog/2023/01/12/version-071#restoring-proptypes)
- [Melhorias na Experiência do Desenvolvedor](/blog/2023/01/12/version-071#developer-experience-improvements)
- [Atualizações da Nova Arquitetura](/blog/2023/01/12/version-071#new-architecture)

Neste post, vamos cobrir alguns dos destaques da versão 0.71.

<!--truncate-->

:::info
Para uma lista completa de mudanças, confira o [CHANGELOG.md](https://github.com/facebook/react-native/blob/main/CHANGELOG.md#v071).
:::

## TypeScript por padrão

Nesta versão, estamos investindo na experiência TypeScript do React Native.

Começando com a versão 0.71, quando você cria um novo app React Native através do React Native CLI, você receberá um app TypeScript por padrão. O novo projeto já vem configurado com um `tsconfig.json` para que, desde o início, sua IDE te ajude a escrever código tipado imediatamente.

Também estamos oferecendo declarações TypeScript integradas e mais precisas diretamente do pacote `react-native`. Isso significa que você não precisará mais do `@types/react-native`, e os tipos serão atualizados em sincronia com os lançamentos do React Native.

Finalmente, nossa documentação foi atualizada para apresentar TypeScript em todos os exemplos.

:::note

Após atualizar para o React Native 0.71, recomendamos remover `@types/react-native` das `devDependencies` do seu package.json.

:::

Para mais detalhes sobre esta mudança, incluindo passos de migração e como isso afeta usuários de Flow, confira nosso post anterior [First-class Support for TypeScript](https://reactnative.dev/blog/2023/01/03/typescript-first).

## Simplificando layouts com Flexbox gap

Com React Native você pode fazer layouts flexíveis de componentes em diferentes tamanhos de tela usando Flexbox. Os navegadores têm suportado as propriedades Flexbox [gap](https://developer.mozilla.org/en-US/docs/Web/CSS/gap), [rowGap](https://developer.mozilla.org/en-US/docs/Web/CSS/row-gap) e [columnGap](https://developer.mozilla.org/en-US/docs/Web/CSS/column-gap), que permitem especificar a quantidade de espaço entre todos os itens em um Flexbox.

Essas propriedades têm sido muito solicitadas no React Native, e a versão 0.71 adiciona suporte inicial para gaps definidos usando valores em pixels. Em versões futuras, adicionaremos suporte para mais valores, como porcentagens.

Para ver por que isso é útil, imagine tentar construir um layout responsivo com cards de tamanho variável, separados por 10px uns dos outros, alinhados nas bordas do container pai. Tentar realizar este layout com margens nos filhos pode ser complicado.

O exemplo a seguir mostra um layout onde começamos dando a cada filho o estilo `margin: 10`:

![Dois diagramas. À esquerda mostra um esqueleto de um app com três caixas que têm margem ao redor delas, fazendo com que as caixas tenham margem em todos os lados. À direita, o mesmo diagrama é mostrado destacado para demonstrar a margem em todos os lados.](/blog/assets/FlexboxGapBefore.png)

Margens são aplicadas uniformemente nas bordas de todos os filhos e não colapsam no Flexbox, nos dando espaçamento no exterior dos cards, e o dobro do espaço no interior comparado ao que queríamos. Podemos contornar isso aplicando margens não-uniformes, usando margens negativas no pai, reduzindo pela metade o espaçamento pretendido, etc., mas pode ser feito de forma muito mais fácil.

Com flex gap, este layout pode ser alcançado definindo `gap: 10` no container para um espaço de 10 pixels entre o interior dos cards:

![Dois diagramas. À esquerda mostra um esqueleto de um app com três caixas que têm margem apenas nos lados internos e não nos lados externos das caixas devido à propriedade Flexbox gap. À direita, o mesmo diagrama é mostrado destacado para demonstrar a margem apenas nos lados internos.](/blog/assets/FlexboxGapAfter.png)

Para mais informações sobre Flexbox gaps, veja [este post do blog CSS Tricks](https://css-tricks.com/minding-the-gap/#aa-flexbox-gaps).

## Props inspirados na web para acessibilidade, estilos e eventos

Esta versão inclui uma série de novos props inspirados em padrões web para alinhar as APIs do React Native em várias plataformas. Esses novos props são puramente aditivos, portanto não há migrações esperadas ou mudanças de comportamento para props equivalentes de acessibilidade, comportamento ou estilo.

Para qualquer novo alias de prop introduzido, se houver um prop existente com um nome diferente e ambos forem especificados, o valor do novo alias terá precedência. Por exemplo, esta versão adiciona um alias de prop `src` para `source` no componente Image para alinhar com o prop `src` na web. Se tanto `src` quanto `source` forem fornecidos, o novo prop `src` será usado.

:::note

Para mais contexto sobre alinhar React Native aos padrões web, confira esta [proposta](https://github.com/necolas/discussions-and-proposals/blob/reduce-fragmentation/proposals/0000-reduce-fragmentation.md) e [discussão relacionada](https://github.com/react-native-community/discussions-and-proposals/pull/496).
:::

#### Acessibilidade

Introduzimos props ARIA como alias para props de acessibilidade existentes do React Native.

Esses props agora existem em todos os componentes principais do React Native: `aria-label`, `aria-labelledby`, `aria-modal`, `id`, `aria-busy`, `aria-checked`, `aria-disabled`, `aria-expanded`, `aria-selected`, `aria-valuemax`, `aria-valuemin`, `aria-valuenow` e `aria-valuetext`.

Também introduzimos comportamento web equivalente para: `aria-hidden`, `aria-live`, `role` e `tabIndex`.

Veja esta [issue](https://github.com/facebook/react-native/issues/34424) para mais detalhes.

#### Comportamento Específico de Componente

Também foram introduzidos props para alinhar nomes de props com nomes de props DOM equivalentes para componentes principais.

- **Image**: `alt`, `tintColor`, `crossOrigin`, `height`, `referrerPolicy`, `src`, `srcSet` e `width`.
- **TextInput**: `autoComplete`, `enterKeyHint`, `inputMode`, `readOnly` e `rows`.

Veja esta [issue](https://github.com/facebook/react-native/issues/34424) para mais detalhes.

#### Estilos

Para alinhar com certos estilos CSS, houve extensões de recursos para os seguintes estilos:

- [`aspectRatio`](https://reactnative.dev/docs/layout-props#aspectratio) agora suporta valores string
- [`fontVariant`](https://reactnative.dev/docs/text-style-props#fontvariant) agora suporta valores string separados por espaço
- [`fontWeight`](https://reactnative.dev/docs/text-style-props#fontWeight) agora suporta valores numéricos
- [`transform`](https://developer.mozilla.org/en-US/docs/Web/CSS/transform) agora suporta valores string

Os seguintes aliases foram adicionados para sombrear estilos existentes do React Native:

- [`objectFit`](https://reactnative.dev/docs/image#objectfit)
- [`pointerEvents`](https://reactnative.dev/docs/view-style-props#pointerevents)
- [`userSelect`](https://developer.mozilla.org/en-US/docs/Web/CSS/user-select)
- [`verticalAlign`](https://reactnative.dev/docs/text-style-props#verticalalign-android)

Veja esta [issue](https://github.com/facebook/react-native/issues/34425) para mais detalhes.

#### Eventos

Finalmente, também adicionamos uma implementação opt-in de [PointerEvents](https://w3c.github.io/pointerevents)

Uma vez habilitados, os seguintes handlers no `View` suportarão hover:

- `onPointerOver`, `onPointerOut`
- `onPointerEnter`, `onPointerLeave`

Esses eventos também estão implementados no `Pressability` para novo suporte opt-in para hover.

Para habilitar esses recursos, defina os seguintes flags como true:

```js
import ReactNativeFeatureFlags from 'react-native/Libraries/ReactNative/ReactNativeFeatureFlags';

// enable the JS-side of the w3c PointerEvent implementation
ReactNativeFeatureFlags.shouldEmitW3CPointerEvents = () => true;

// enable hover events in Pressibility to be backed by the PointerEvent implementation.
// shouldEmitW3CPointerEvents should also be true
ReactNativeFeatureFlags.shouldPressibilityUseW3CPointerEventsForHover =
  () => true;
```

:::note

Você também precisará habilitar flags de recursos React em sua configuração nativa no [Android](https://reactnative.dev/blog/2022/12/13/pointer-events-in-react-native#android-specific) e [iOS](https://reactnative.dev/blog/2022/12/13/pointer-events-in-react-native#ios-specific).

:::

Confira nosso [post dedicado sobre PointerEvents](https://reactnative.dev/blog/2022/12/13/pointer-events-in-react-native) para saber mais.

## Restaurando PropTypes

Os prop types do React Native, como `ViewPropTypes` e `Text.propTypes`, foram descontinuados na versão 0.66 e acessá-los gerava avisos de descontinuação. Quando foram removidos na versão 0.68, muitos desenvolvedores começaram a experimentar erros ao atualizar para a versão mais recente do React Native.

Após alguma investigação, percebemos que alguns problemas impediram a comunidade de tomar ações sobre os avisos de descontinuação. Primeiro, o aviso de descontinuação nem sempre era acionável, o que fez as pessoas os ignorarem ([issue um](https://github.com/facebook/react-native/pull/34650), [issue dois](https://github.com/react-native-community/cli/pull/1699)). Segundo, os avisos de descontinuação estavam sendo [filtrados incorretamente](https://github.com/facebook/react-native/commit/fa2842d) pelo `LogBox.ignoreLogs`. Ambos foram corrigidos agora, mas queremos dar às pessoas mais tempo para atualizar os locais de chamada descontinuados.

Então, nesta versão, estamos adicionando de volta os propTypes do React Native para que seja mais fácil para as pessoas atualizarem e migrarem seu código para evitar usá-los. O pacote `deprecated-react-native-prop-types` também foi atualizado para todos os props na versão 0.71. No futuro, planejamos prosseguir com a descontinuação e remover os prop types mais uma vez. Esperamos que, quando revisitarmos a remoção, a comunidade experimente significativamente menos problemas.

:::caution

Como parte desta mudança, também estamos removendo a filtragem de console do `LogBox.ignoreLog`. Isso significa que logs que você filtrou anteriormente com `Logbox.ignoreLog` começarão a aparecer novamente no console quando você atualizar.

Isso é esperado, porque permite que logs como avisos de descontinuação sejam encontrados e corrigidos.
:::

## Melhorias na Experiência do Desenvolvedor

### React DevTools

Nesta versão, trouxemos dois recursos populares do React DevTools na web para o React Native.

"Click to inspect" é a opção no canto superior esquerdo do React Dev Tools que permite clicar em um item no app para inspecioná-lo no Dev Tools, similar ao inspetor de elementos do Chrome.

O destaque de componente destacará o elemento que você selecionar no DevTools no app para que você possa ver quais componentes React se alinham com quais elementos na tela.

Aqui estão ambos os recursos em ação:

![Vídeo do comportamento descrito acima em ação. À esquerda está um app React Native rodando em um simulador de iPhone. À direita está o React DevTools. Em ambos os fluxos de trabalho, clicar em um item no DevTools destaca os componentes correspondentes no app.](/blog/assets/ElementInspecting.gif)

### Hermes

No React Native 0.70, fizemos do [Hermes o engine padrão para React Native](https://reactnative.dev/blog/2022/07/08/hermes-as-the-default).

No React Native 0.71, estamos atualizando o Hermes com algumas melhorias notáveis:

- **Melhorar source maps**: Ao carregar source maps pela rede com Metro, restauramos a capacidade de usar source maps em versões recentes do Chrome Dev Tools fora do Flipper.
- **Melhorar performance do `JSON.parse`**: Esta versão inclui uma otimização de performance que melhora a performance do `JSON.parse` em até 30%.
- **Adicionar suporte para `.at()`**: Hermes agora [suporta](https://github.com/facebook/hermes/issues/823) `.at()` para `String`, `TypedArray` e `Array`.

Para uma lista completa de mudanças, veja [a issue Road to 71](https://github.com/reactwg/react-native-releases/discussions/41#discussioncomment-4089256).

### Nova Arquitetura

Esta versão traz muitas melhorias para a experiência experimental da Nova Arquitetura com base no feedback de usuários e relatórios que coletamos até agora.

- **Tempos de build reduzidos**: O novo modelo de distribuição usa Maven Central, o que nos permite reduzir bastante o tempo de build no Android, resolve muitos problemas de build no Windows e proporciona uma experiência mais integrada com a Nova Arquitetura. [Leia mais aqui](https://github.com/reactwg/react-native-new-architecture/discussions/105).
- **Escreva menos código C++**: Agora você pode habilitar a Nova Arquitetura sem ter que adicionar nenhum código C++ no seu app e o template CLI do app foi limpo de todo o código C++ e dos arquivos CMake. [Leia mais aqui](https://github.com/reactwg/react-native-new-architecture/discussions/101).
- **Melhor encapsulamento da configuração do app iOS**: No iOS, seguimos uma abordagem similar ao Android e encapsulamos a maior parte da lógica para configurar a Nova Arquitetura na classe `RCTAppDelegate`, o que simplificará atualizações no futuro com menos mudanças manuais que quebram compatibilidade.
- **Melhor gerenciamento de dependências no iOS**: Para mantenedores de bibliotecas, adicionamos uma nova função `install_module_dependencies` para chamar dentro do `podspec` do seu pacote, que instalará todas as dependências necessárias para a Nova Arquitetura.
- **Correções de bugs e melhor suporte para IDE**: corrigimos vários bugs e problemas (como [melhor suporte de IDE para Android](https://github.com/reactwg/react-native-new-architecture/discussions/102)) que foram relatados por nossos usuários no [Grupo de Trabalho da Nova Arquitetura](https://github.com/reactwg/react-native-new-architecture/discussions).

Como lembrete, a Nova Arquitetura ainda é uma experiência de API experimental enquanto iteramos em mudanças para facilitar a adoção. Por favor, experimente os novos passos simplificados na [documentação da Nova Arquitetura](https://reactnative.dev/docs/new-architecture-intro) e poste qualquer feedback que você tenha no [Grupo de Trabalho da Nova Arquitetura](https://github.com/reactwg/react-native-new-architecture/discussions).

### Outras Correções Notáveis

- **Melhor colapso de stack frames**: [Atualizamos a lista de frames internos](https://github.com/react-native-community/cli/pull/1699) para o React Native para que o LogBox mostre seu código com mais frequência em vez de frames internos do React Native, ajudando você a depurar problemas mais rapidamente.
- **Melhorias no tempo de build**: Migramos assets para o Maven Central para prefabs para melhorar os tempos de build (tanto iOS quanto Android) para Hermes nas arquiteturas atual e nova.
- **Melhorias no template Android**: O template Android foi bastante limpo e agora depende totalmente do React Native Gradle Plugin. Você pode encontrar as instruções de configuração diretamente dentro do template ou na [nova página dedicada no site](https://reactnative.dev/docs/react-native-gradle-plugin).

## Mudanças que quebram compatibilidade

- **Mudanças no Log do Console:** `LogBox.ignoreLog` não filtra mais logs do console. Isso significa que você começará a ver logs no console que você silenciou no LogBox. Veja [este comentário](https://github.com/facebook/react-native/pull/34476#issuecomment-1240667794) para mais detalhes.
- **AsyncStorage e MaskedViewIOS removidos**: Esses componentes foram descontinuados desde a versão [0.59](https://github.com/facebook/react-native/blob/main/CHANGELOG.md#deprecated-8), então é hora de removê-los completamente. Para alternativas, por favor confira o [React Native Directory](https://reactnative.directory/) para pacotes da comunidade que cobrem esses casos de uso.
- **JSCRuntime movido para react-jsc:** react-jsi agora está dividido em react-jsc e react-jsi. Se você usa JSCRuntime, precisará adicionar react-jsc como uma dependência ([facebook/react-native@6b129d8](https://github.com/facebook/react-native/commit/6b129d81ed8cab301775d2a04971e255df9290de)).

## Agradecimentos

Esta versão é possível graças ao trabalho de mais de 70 contribuidores adicionando mais de 1000 commits.

Queremos agradecer especialmente aqueles que contribuíram para esses grandes projetos do React Native:

- **Suporte a Flexbox Gap**: [@intergalacticspacehighway](https://github.com/intergalacticspacehighway) e [@jacobp100](https://github.com/jacobp100).
- **Props inspirados na web**: [@gabrieldonadel](https://github.com/gabrieldonadel) [@dakshbhardwaj](https://github.com/dakshbhardwaj) [@dhruvtailor7](https://github.com/dhruvtailor7) [@ankit-tailor](https://github.com/ankit-tailor) [@madhav23bansal](https://github.com/madhav23bansal).
- **Melhorias no Codegen**: [@AntoineDoubovetzky](https://github.com/AntoineDoubovetzky), [@MaeIg](https://github.com/MaeIg), [@Marcoo09](https://github.com/Marcoo09), [@Naturalclar](https://github.com/Naturalclar), [@Pranav-yadav](https://github.com/Pranav-yadav), [@ZihanChen-MSFT](https://github.com/ZihanChen-MSFT), [@dakshbhardwaj](https://github.com/dakshbhardwaj), [@dhruvtailor7](https://github.com/dhruvtailor7), [@gabrieldonadel](https://github.com/gabrieldonadel), [@harshsiri110](https://github.com/harshsiri110), [@ken0nek](https://github.com/ken0nek), [@kylemacabasco](https://github.com/kylemacabasco), [@matiassalles99](https://github.com/matiassalles99), [@mdaj06](https://github.com/mdaj06), [@mohitcharkha](https://github.com/mohitcharkha), [@tarunrajput](https://github.com/tarunrajput), [@vinayharwani13](https://github.com/vinayharwani13), [@youedd](https://github.com/youedd), [@byCedric](https://github.com/byCedric).

Finalmente, obrigado a [@cortinico](https://github.com/cortinico), [@kelset](https://github.com/kelset), [@dmytrorykun](https://github.com/dmytrorykun), [@cipolleschi](https://github.com/cipolleschi) e [@titozzz](https://github.com/titozzz) por lançar esta versão!

## Experimente a versão 0.71.0 agora!

Para usuários do React Native CLI, veja a [documentação de atualização](https://reactnative.dev/docs/upgrading) para saber como atualizar seu projeto existente, ou crie um novo projeto com `npx react-native init MyProject`.

A versão 0.71 do React Native será suportada no Expo SDK versão 48.

:::info
0.71 é agora a versão estável mais recente do React Native e as versões 0.68.x não são mais suportadas. Para mais informações, veja [a política de suporte do React Native](https://github.com/reactwg/react-native-releases#releases-support-policy).
:::

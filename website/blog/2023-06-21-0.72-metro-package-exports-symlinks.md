---
ia-translated: true
title: 'React Native 0.72 - Suporte a Symlink, Melhores Erros e mais'
authors: [kelset, fortmarek, cipolleschi, lunaleaps]
tags: [announcement, release]
date: 2023-06-21
---

Hoje estamos lançando a versão 0.72!

Este lançamento adiciona recursos altamente solicitados para o Metro, melhor tratamento de erros e outras melhorias na experiência do desenvolvedor. Muito deste trabalho foi priorizado a partir do seu feedback na [pesquisa da comunidade de 2022](https://github.com/react-native-community/discussions-and-proposals/discussions/528) -- obrigado a todos que participaram!

### Destaques

- [Novos Recursos do Metro](/blog/2023/06/21/0.72-metro-package-exports-symlinks#new-metro-features)
- [Melhorias na Experiência do Desenvolvedor](/blog/2023/06/21/0.72-metro-package-exports-symlinks#developer-experience-improvements)
- [Atualizações da Nova Arquitetura](/blog/2023/06/21/0.72-metro-package-exports-symlinks#moving-new-architecture-updates)

### Breaking Changes

- [Remoções de Componentes Descontinuados](/blog/2023/06/21/0.72-metro-package-exports-symlinks#deprecated-component-removals)
- [Renomeações de Pacotes](/blog/2023/06/21/0.72-metro-package-exports-symlinks#package-renames)

<!--truncate-->

## Destaques

### Novos Recursos do Metro

#### Suporte a Symlink (Beta)

O suporte a symlink continua sendo um dos recursos mais solicitados no Metro e, no React Native 0.72, temos o prazer de anunciar o suporte beta para ele.

O suporte a symlink permite que o React Native funcione de forma transparente com configurações de monorepo e pnpm, removendo a necessidade de soluções alternativas. Consulte [Habilitando Recursos Beta](/blog/2023/06/21/0.72-metro-package-exports-symlinks#enabling-beta-features) para usar em seu app.

Atualmente está em beta para coletar feedback sobre a experiência do desenvolvedor considerando diferentes fluxos de trabalho, veja mais detalhes [aqui](https://twitter.com/robjhogan/status/1672293540632641554). Planejamos habilitar symlinks por padrão na versão 0.73.

#### Suporte a Package Exports (Beta)

[Package Exports](https://nodejs.org/api/packages.html#exports) é a alternativa moderna ao campo `"main"` do package.json e fornece novos recursos para pacotes npm definirem sua API pública e serem direcionados ao React Native.

Ao habilitar o suporte a Package Exports na sua configuração do Metro, seu app será compatível com o ecossistema JavaScript mais amplo, incluindo através da nova ["react-native" community condition](https://nodejs.org/docs/latest-v19.x/api/packages.html#community-conditions-definitions). Consulte [Habilitando Recursos Beta](/blog/2023/06/21/0.72-metro-package-exports-symlinks#enabling-beta-features) para usar em seu app.

:::tip
Consulte [Suporte a Package Exports no React Native](/blog/2023/06/21/package-exports-support) para saber mais sobre este recurso e nossos planos para lançamento estável.
:::

#### Habilitando Recursos Beta

Para habilitar esses recursos em seu projeto, atualize o arquivo `metro.config.js` do seu app e defina as opções `resolver.unstable_enableSymlinks` ou `resolver.unstable_enablePackageExports`.

```js
const config = {
  // ...
  resolver: {
    unstable_enableSymlinks: true,
    unstable_enablePackageExports: true,
  },
};
```

#### Nova Configuração do `metro.config.js`

No React Native 0.72, mudamos a configuração de carregamento para o Metro no React Native CLI. Por favor, atualize o arquivo `metro.config.js` do seu projeto para corresponder à [versão do template](https://github.com/facebook/react-native/blob/76a42c292de838a0dd537935db792eaa81410b9b/packages/react-native/template/metro.config.js).

:::info
Por favor, atualize seu arquivo de configuração para o seguinte [formato](https://github.com/facebook/react-native/blob/76a42c292de838a0dd537935db792eaa81410b9b/packages/react-native/template/metro.config.js). Você também pode seguir o [upgrade-helper](https://react-native-community.github.io/upgrade-helper/?from=0.71.8&to=0.72.0).

Essas mudanças de formato no `metro.config.js` se tornarão obrigatórias na versão 0.73. Para a 0.72, registraremos um aviso se não for atualizado.
:::

Isso move o controle sobre estender a configuração base do Metro do React Native para o seu projeto, e limpamos os padrões remanescentes. Além disso, isso significa que comandos standalone do Metro CLI, como `metro get-dependencies`, agora funcionarão.

### Melhorias na Experiência do Desenvolvedor

#### Chega de redboxes com propriedades de estilo inválidas

Antes deste lançamento, fornecer uma propriedade de estilo inválida no StyleSheet resultaria em um redbox. Este é um erro de alto sinal que interrompe o fluxo de trabalho do desenvolvedor para um erro de risco relativamente baixo.

Na versão 0.72, relaxamos essa expectativa para falhar silenciosamente, como fornecer uma propriedade CSS inválida no navegador, e atualizamos os tipos de modo que alguns erros podem ser capturados em tempo de compilação vs. tempo de execução.

#### Melhor legibilidade de erros para Hermes

O Hermes adicionou uma mensagem de erro melhor ao invocar um callable indefinido.

```
    var x = undefined; x();
    // Antes: undefined is not a function
    // Depois: x is not a function (it is undefined)
```

Além disso, os stack traces do LogBox agora filtram frames internos de bytecode do Hermes que não são relevantes para usuários de apps.

#### Saída de erro aprimorada do React Native CLI

A versão 0.72 vem com o React Native CLI v11, que inclui melhorias para reduzir duplicação, esclarecer redação, reduzir stack traces detalhados e adicionar links diretos para documentos relevantes nos seguintes comandos `init`, `run-android` e `run-ios`.

Você pode encontrar outras melhorias nos [changelogs do React Native CLI](https://github.com/react-native-community/cli/releases).

#### Compilação e Análise de JSON Mais Rápidas no Hermes

O Hermes melhorou o tempo de compilação de literais de objeto grandes. Por exemplo, em um problema relatado, [#852](https://github.com/facebook/hermes/issues/852), um usuário tinha um conjunto de dados inteiro escrito como um literal de objeto grande. Ao melhorar o algoritmo de deduplicação que o Hermes usa, a compilação acelerou em 97% ([221c](https://github.com/facebook/hermes/commit/221ce21a209e2e32a3eaaa2d9e28ca81842fad20)). Essas melhorias beneficiarão os tempos de build para apps que agrupam muitos objetos.

Múltiplas otimizações ([de9c](https://github.com/facebook/hermes/commit/de9cff2aa41fc1f297b568848143347823d73659), [6e2d](https://github.com/facebook/hermes/commit/6e2dd652c8d90c5d59737a81f66a259efffdcd00)) para análise de JSON também foram implementadas, beneficiando apps que usam bibliotecas como redux-persist que dependem muito de manipulação de JSON.

#### Mais Suporte ECMAScript no Hermes

O suporte para as seguintes especificações no Hermes foi implementado no React Native 0.72:

- Suporte a `prototype.at` para [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/at), [TypedArray](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/at) e [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/at). Consulte [#823](https://github.com/facebook/hermes/issues/823) ([ebe2](https://github.com/facebook/hermes/commit/ebe2915ac386a6b73dec39c2af4ac7063e68cd99)).
- Implementação de [well-formed JSON.stringify](https://github.com/tc39/proposal-well-formed-stringify) ([d41d](https://github.com/facebook/hermes/commit/d41decf244aa814b1e58827a9de982f3b71667de)) para prevenir strings Unicode mal formadas
- Implementação de [AggregateError](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError) ([9b25](https://github.com/facebook/hermes/commit/9b25a2530eb515f6c4fbd397ae290b6c97c049b2)) que representa vários erros encapsulados em um único erro. Útil para múltiplos erros como de [`Promise.any()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/any) quando todas as promises passadas para ele rejeitam.

Para usuários no JSC, esses recursos já estão disponíveis.

### Atualizações da Nova Arquitetura

A Nova Arquitetura está atualmente experimental. Para manter as atualizações focadas em seu público-alvo, estamos movendo as atualizações da Nova Arquitetura na versão 0.72, e lançamentos futuros, para o [grupo de trabalho](https://github.com/reactwg/react-native-new-architecture/discussions) dedicado. Essa mudança também permitirá atualizações mais frequentes, como trabalho que é enviado em nossas nightlies.

Você pode ler as atualizações da versão 0.72 para a Nova Arquitetura [aqui](https://github.com/reactwg/react-native-new-architecture/discussions/136). Inscreva-se nas notificações do GitHub do grupo de trabalho para se manter informado sobre nosso progresso na Nova Arquitetura.

## Breaking Changes

### Remoções de Componentes Descontinuados

Os seguintes pacotes foram removidos do React Native na versão 0.72. Por favor, migre para o pacote da comunidade recomendado:

- [Slider](https://reactnative.dev/docs/0.72/slider) é substituído por [@react-native-community/slider](https://github.com/callstack/react-native-slider/tree/main/package)
- [DatePickerIOS](https://reactnative.dev/docs/0.72/datepickerios) é substituído por [@react-native-community/datetimepicker](https://github.com/react-native-datetimepicker/datetimepicker)
- [ProgressViewIOS](https://reactnative.dev/docs/0.72/progressviewios) é substituído por [@react-native-community/progress-view](https://github.com/react-native-progress-view/progress-view)

### Renomeações de Pacotes

Todos os pacotes publicados a partir do repositório principal do [`react-native`](https://github.com/facebook/react-native) agora estão em `react-native/packages`, e são publicados sob o [escopo npm @react-native](https://www.npmjs.com/search?q=%40react-native) para garantir propriedade clara.

Não há mudanças no pacote [react-native](https://www.npmjs.com/package/react-native).

| Nome Antigo do Pacote                   | Nome Novo do Pacote              |
| --------------------------------------- | -------------------------------- |
| `@react-native-community/eslint-config` | `@react-native/eslint-config`    |
| `@react-native-community/eslint-plugin` | `@react-native/eslint-plugin`    |
| `@react-native/polyfills`               | `@react-native/js-polyfills`     |
| `@react-native/normalize-color`         | `@react-native/normalize-colors` |
| `@react-native/assets`                  | `@react-native/assets-registry`  |
| `react-native-codegen`                  | `@react-native/codegen`          |
| `react-native-gradle-plugin`            | `@react-native/gradle-plugin`    |

Essa mudança não afetará você se você não tiver dependência direta em um pacote renomeado. Caso contrário, ao atualizar para o React Native 0.72, atualize qualquer dependência renomeada para sua versão ~0.72.

Você pode ler a motivação que levou a essas mudanças [no RFC dedicado](https://github.com/react-native-community/discussions-and-proposals/pull/480).

## Agradecimentos

Muito deste lançamento veio do feedback direto da comunidade. De relatos sobre [redboxes barulhentos](https://twitter.com/baconbrix/status/1623039650775371792), [bugs com Package Exports](https://github.com/facebook/metro/issues/965), [benchmarks para a Nova Arquitetura](https://github.com/reactwg/react-native-new-architecture/discussions/85) — tudo isso é valioso ouvir e apreciamos o tempo que leva para compartilhar feedback.

A versão 0.72 contém mais de [1100 commits](https://github.com/facebook/react-native/compare/v0.71.8...v0.72.0) de 66 contribuidores. Obrigado por todo o trabalho árduo!

## Atualizar para 0.72

Confira a lista de mudanças necessárias no [upgrade-helper](https://react-native-community.github.io/upgrade-helper/), ou leia a [documentação de atualização](/docs/upgrading) para saber como atualizar seu projeto existente, ou crie um novo projeto com `npx react-native@latest init MyProject`.

Se você usa Expo, a versão 0.72 do React Native será suportada no lançamento do Expo SDK 49.

:::info
0.72 é agora a versão estável mais recente do React Native e a versão 0.69.x agora não é mais suportada. Para mais informações, consulte [a política de suporte do React Native](https://github.com/reactwg/react-native-releases#releases-support-policy).
:::
